\chapter{まとめと結論}
\label{chap:conclusion}

\section{まとめ}

本論文のまとめとして，各章の内容を述べる．

\ref{chap:introduction}章では、本研究の背景および課題として，大規模データセンタのコンピュータ管理者にとって，
様々な設定をもつ大量の物理的なコンピュータの監視および解析が困難であることを述べた
そこで本研究の目的として，

\ref{chap:related_works}章では、仮想環境によるオペレーティングシステムのデバッグや，監視対象ホスト内で監視プロセスを起動する手法など，
既存のオペレーティングシステムのコンテキストを監視する手法について述べた．
さらに，様々なRDMA実装がある中で，本研究で使用するNetTLPによるRDMAを使う理由について述べた．

\ref{chap:approach}章では、動作中のコンピュータから取得したアトミックではないメモリダンプから
オペレーティングシステムのコンテキストを復元するための手法について述べた．
その上で，メモリからどのような情報を探索することで，コンピュータの状態を復元できるのかについて述べた．
さらに，物理メモリアドレスのみを指定できる中で，取得が困難な情報がどのような種類の情報で，その情報を本研究においてどのように復元していくかについて述べた．

\ref{chap:implementation}章では、\ref{chap:approach}章で述べた手法を実現するための具体的な実装について述べた．
特にメモリダンプしかない状態からいかにして，監視対象ホストのカーネルコンフィグの値を復元するか，復元した値からコンピュータの内部的な値，
すなわち構造体のオフセットを復元する実装について述べた．
最終的に，Linuxカーネルのバージョンのみを通知された状態から，プロセス一覧に関する情報を取得するために必要な値を復元し，プロセス一覧を出力できる実装について述べた．

\ref{chap:evaluation}章では、本研究における評価として，Linuxカーネルのバージョンのみが与えられた状態でプロセスリストの一覧を取得できることを示した．
実験として，\ref{chap:implementation}章で述べた工程を一つずつ実行した過程を示した．
最終的に，本研究の実装の出力結果と監視対象ホストで実行したpsコマンドの出力結果を比較し，任意に起動したプロセスのIDが等しくなっていることを示した．
さらに，監視対象ホストにおいてカーネルパニックを発生させ，オペレーティングシステムが停止した状態の中でも，プロセス情報の一覧を取得できることを示した．

\section{結論}

本研究の結論として，\ref{chap:implementation}章で述べた実装を用いることで，
監視対象ホストのバージョン情報のみを知らされた状態で，オペレーティングシステムのコンテキストの一つであるプロセス情報の一覧を取得できることを示した．

プロセス一覧を探索するにあたり，監視対象ホストが内部で使用している値，
例えば，task\_struct構造体の各フィールドのオフセットや，init\_taskのカーネル空間における仮想アドレスを，
自ホストで推定，導出するために，メモリダンプから収集したカーネルコンフィグの値から，実装を実行するホストで再度ビルドすることで，復元できることを示した．

また，カーネル空間はストレートマップであるがゆえに，メモリダンプから特定の値，本研究の実験では，swapper/0という文字列を走査し，
そこから物理アドレスおよびカーネル空間における仮想アドレスを導出することができることを示した．

% 結論は俺の知見，考察．結局こうだったを述べる．こういうところでは使えた，こういうところではダメだった．

% 本論文の結論として，\ref{chap:implementation}で述べたような実装を用いることで，目的を達成することができた．（加筆）

\section{今後の課題}
\label{section:kongo}

% 特にカーネルバージョンの特定．

本研究の実験における環境として，オペレーティングシステムの情報，すなわちLinuxカーネルのバージョンに関する情報は，事前に実装を実行するホストは知っていることとした．
しかし，現実のコンピュータは特定のLinuxカーネルのバージョンで動いているわけではない．
特に大規模データセンタにおいては，各ホストは様々なカーネルバージョンおよびディストリビュージョンで動作している．

よって今後の課題として，メモリダンプの情報からLinuxカーネルのバージョンを特定することをあげる．

\subsection{セキュリティ的な課題}

本研究における環境では，FPGAボードを物理的に設置する，という工程のみでメモリの情報を取得でき，オペレーティングシステムのコンテキストを復元できてしまう．
その一例として，本研究の実装では，プロセス情報の一覧を，Linuxカーネルのバージョン情報のみから復元できることを示した．

当然，ルート権限はおろか，通常のユーザー権限すらない中での復元となるため，悪用された場合に存在そのものがセキュリティ的なリスクとなってしまう．
そのため，今後の研究では，\ref{section:kongo}で述べた課題に加えて，本研究のセキュリティ面におけるリスク軽減に関する研究を行っていく．
